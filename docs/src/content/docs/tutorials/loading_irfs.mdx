---
title: Loading IRFs
description: Tutorial on working with Instrument Response Functions using the IRFHouse class.
---

import {Aside, Steps, Tabs, TabItem} from "@astrojs/starlight/components";

## Objective

This tutorial shows you how to load and use Instrument Response Functions (IRFs) for CTA using the `IRFHouse` class. For setup instructions and downloading IRFs, see the [IRFs Guide](/getting_started/irfs).

## Prerequisites

- IRF files downloaded and organized (see [Setup Guide](/getting_started/setup) and [IRFs Guide](/getting_started/irfs))
- Python environment with sensipy installed

## Basic Usage

<Steps>

1. **Initialize IRFHouse**

   ```python
   from sensipy.ctaoirf import IRFHouse

   # Point to your IRF root directory
   house = IRFHouse(base_directory="./IRFs/CTAO")
   ```

2. **Load a Specific IRF**

   ```python
   irf = house.get_irf(
       site="south",                # "north" or "south"
       configuration="alpha",        # "alpha", "omega", or "alpha_lst"
       zenith=20,                    # 20, 40, or 60 degrees
       duration=1800,                # 1800, 18000, or 180000 seconds
       azimuth="average",           # "north", "south", or "average"
       version="prod5-v0.1",        # IRF production version
   )

   print(irf)
   ```

   **Expected output:**

   ```
   CTA IRF [prod5-v0.1]
       filepath: .../CTA-Performance-prod5-v0.1-South-20deg...
       config: alpha
       site: south
       zenith: 20ยบ
       duration: 1800s
       azimuth: average
   ```

</Steps>

<Aside type="note">
  For detailed information about IRF parameters (site, configuration, zenith angle, etc.), see the [IRFs Guide](/getting_started/irfs).
</Aside>

## Common Examples

<Tabs>
  <TabItem label="Optimal Sensitivity">
    ```python
    # Best sensitivity: South, low zenith, alpha config
    irf = house.get_irf(
        site="south",
        configuration="alpha",
        zenith=20,  # Low zenith = better sensitivity
        duration=1800,
        azimuth="average",
        version="prod5-v0.1",
    )
    ```
  </TabItem>

  <TabItem label="High Zenith">
    ```python
    # Higher zenith (worse sensitivity, but more sky coverage)
    irf = house.get_irf(
        site="north",
        configuration="alpha",
        zenith=60,  # High zenith
        duration=1800,
        azimuth="average",
        version="prod5-v0.1",
    )
    ```
  </TabItem>

  <TabItem label="Northern Site">
    ```python
    # CTA North for northern hemisphere sources
    irf = house.get_irf(
        site="north",
        configuration="alpha",
        zenith=40,
        duration=1800,
        azimuth="average",
        version="prod5-v0.1",
    )
    ```
  </TabItem>
</Tabs>

### Loading Multiple IRFs

```python
from sensipy.ctaoirf import IRFHouse

house = IRFHouse(base_directory="./IRFs/CTAO")

# Load IRFs for different configurations
irfs = {}

for site in ["north", "south"]:
    for zenith in [20, 40, 60]:
        key = f"{site}_z{zenith}"
        irfs[key] = house.get_irf(
            site=site,
            configuration="alpha",
            zenith=zenith,
            duration=1800,
            azimuth="average",
            version="prod5-v0.1",
        )

print(f"Loaded {len(irfs)} IRF configurations")
```

## IRF Object Properties

The `IRF` object provides useful information:

```python
from sensipy.ctaoirf import IRFHouse

house = IRFHouse(base_directory="./IRFs/CTAO")
irf = house.get_irf(
    site="south",
    configuration="alpha",
    zenith=20,
    duration=1800,
    azimuth="average",
    version="prod5-v0.1",
)

# Access IRF properties
print(f"Filepath: {irf.filepath}")
print(f"Site: {irf.site}")
print(f"Configuration: {irf.configuration}")
print(f"Zenith: {irf.zenith}")
print(f"Duration: {irf.duration}")
print(f"Version: {irf.version}")

# Energy limits
energy_min, energy_max = irf.energy_limits
print(f"Energy range: {energy_min} to {energy_max}")

# String representation
print(irf)  # Formatted summary
```

## Verifying Your IRF Setup

Use `check_all_paths()` to verify all expected IRF files exist:

```python
house = IRFHouse(base_directory="./IRFs/CTAO", check_irfs=True)

# This will check all paths and report missing files
house.check_all_paths()
```

<Aside type="caution">
  Setting `check_irfs=True` during initialization will automatically verify IRF
  files exist, which may slow down initialization if you have many IRF files.
</Aside>

## Using IRFs with Enums

You can use enums for type safety:

```python
from sensipy.ctaoirf import IRFHouse, Site, Zenith, Duration, Configuration, Azimuth, Version

house = IRFHouse(base_directory="./IRFs/CTAO")

irf = house.get_irf(
    site=Site.south,
    configuration=Configuration.alpha,
    zenith=Zenith.z20,
    duration=Duration.t1800,
    azimuth=Azimuth.average,
    version=Version.prod5_v0p1,
)
```

## Next Steps

- Continue with the [Basic Workflow](./basic_workflow) tutorial to use IRFs in a complete example
- Learn about [Sensitivity Calculations](/getting_started/sensitivity) using these IRFs
- Check the [IRF API Reference](/reference/ctaoirf) for detailed documentation
- See the [IRFs Guide](/getting_started/irfs) for setup and troubleshooting details
